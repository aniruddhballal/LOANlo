# Project Development Roadmap

> **Comprehensive task tracking and feature management across all development domains**

---

## Table of Contents

- [Frontend Design, UI/UX & Feature Enhancements](#frontend-design-uiux--feature-enhancements) (87)
- [Backend Development, Security & Architecture](#backend-development-security--architecture) (150)

---

## Frontend Design, UI/UX & Feature Enhancements

**Domain Focus:** Visual design, interactive components, user interface refinement, and accessibility improvements to deliver an exceptional user experience aligned with modern corporate standards.

### ✅ Completed Initiatives (82)

| ID | Initiative | Description |
|----|-----------|-------------|
| 2 | **Styling Framework Implementation** | Implemented comprehensive styling for Login, Register, Dashboard, ApplicationStatus, Profile, LoanApplication, and DocumentUpload pages using modular CSS architecture |
| 7 | **CSS Consolidation** | ~~Unified all module.css files to ensure consistent styling across pages~~ *(Deprecated: Transitioned to vanilla module.css)* |
| 8 | **Design System Overhaul** | Enhanced application-wide styling by transitioning from dark, inconsistent theme to white-based, formal, corporate, sleek, and modern design system |
| 12 | **Tailwind CSS Migration** | Migrated from vanilla module.css to Tailwind CSS framework for improved maintainability and consistency |
| 13 | **Component Library Integration** | Integrated enhanced styling components and iconography from Tailwind CSS library |
| 14 | **Semantic HTML Refactoring** | Refactored Login and Register page structures by converting div elements to semantic form tags |
| 15 | **Accessibility Enhancement** | Implemented keyboard accessibility by enabling Enter key submission for Login and Register forms |
| 18 | **Progress Visualization** | Developed color-coded visual indicators to display fractional progress of document upload completion |
| 19 | **Dynamic Landing States** | Implemented conditional landing animations (Welcome/Congratulations/Error states) that dynamically respond to user actions and navigation context |
| 20 | **Profile Management UX** | Designed and implemented intuitive UI/UX flows for profile editing and deletion functionalities |
| 25 | **Quality Assurance Review** | Conducted comprehensive UI/UX audit and quality assurance review |
| 36 | **Performance Optimization** | Integrated loading spinners and skeleton screen components across all application pages to improve perceived performance |
| 38 | **Feedback System** | Implemented comprehensive success and error messaging system for all modals, forms, and submission workflows |
| 45 | **Intelligent Form Behavior** | Developed intelligent form behavior including auto-scroll, auto-close, and auto-highlight features for Personal Details form input fields to enhance error and success state visibility |
| 49 | **Skeleton Loading Implementation** | Implemented skeleton loading components for Applicant Dashboard, Underwriter Dashboard, and RoleProtectedRoute component |
| 50 | **Modal Viewport Fix** | Resolved UI obstruction issue affecting the bottom viewport area in Underwriter's LoanReviewModal |
| 54 | **Container Optimization** | Fixed dimensional resize glitches occurring in individual document upload submission containers |
| 55 | **Performance Enhancement** | Optimized document deletion functionality to prevent unnecessary full-page reloads on ApplicationStatus page |
| 56 | **Button Style Refinement** | Refining "Begin Application Process" button styles to ensure consistency with application-wide design system |
| 61 | **Modal Consistency** | Standardized styling for delete confirmation modals across loan applications and documents, ensuring design consistency for dynamically created components |
| 62 | **Error Display Enhancement** | Enhancing styling and animation quality for individual field error displays on Personal Details page |
| 78 | **Interactive Feedback** | Enhanced "Save & Continue" button with custom cursor hover state for improved user feedback |
| 79 | **Button State Fix** | Resolved persistent active state styling issue on "Previous" button that incorrectly carried over to subsequent pages after navigation |
| 81 | **Interactive Feedback Standardization** | Standardizing button styles and improving interactive feedback across all components, using "Save & Continue" button as design reference |
| 92 | **Advanced Data Operations** | Implemented advanced search, sort, and filter capabilities for Underwriters to view specific loan applications with matching results display |
| 93 | **Layout Optimization** | Optimized Dashboard layout by expanding table width to eliminate unused whitespace and improve content density |
| 94 | **UI Consolidation** | Redesigned loan application display on ApplicationStatus page to match the styling pattern used for recent applications on Applicant Dashboard, subsequently removing redundant recent applications section from Dashboard |
| 95 | **Header Alignment** | Adjusted Dashboard header alignment to accommodate wider tabular content layouts |
| 96 | **Contextual Messaging** | Refined profile completion messaging to display "Personal details are required" only for newly created accounts, removing redundant completion messages for users with completed profiles |
| 97 | **Loading Consistency** | Replaced loading spinners with skeleton loaders on ApplicationStatus page for consistency with ApplicantDashboard implementation using SkeletonComponents |
| 103 | **PersonalDetailsRequired Page Styling** | Updated PersonalDetailsRequired component to match email verification page styling - replaced gradient header and decorative elements with centered card layout, changed from red to amber theme, simplified to font-light typography, matched button styling with dashboard theme (gray-900), added back arrow icon, and reduced visual complexity for more formal, professional appearance |
| 111 | **Registration Email Verification UI** | Added `registrationSuccess` state in `Register.tsx` to show a success screen when a user registers but still needs to verify their email, including instructions and verification info. |
| 114 | **Unified Loading Experience for Auth Routes** | Replaced the basic `LoadingSpinner` with the animated `LoadingState` component in both `RootRedirect` and `PublicRoute`, creating a consistent, elegant, and user-friendly loading experience during authentication and redirection. |
| 119 | **Auth Flow: Reuse Centralized Email Verification Component** | Refactored `Register.tsx` to remove inline email verification success UI and reuse the existing `EmailVerificationRequired.tsx` component. Implemented redirect via `navigate('/email-verification-required')` and stored pending user email in `localStorage` for persistence. This unifies verification UX across the app, improves maintainability, and ensures consistent flow between registration and login stages. |
| 122 | **Login Success Animation: Dynamic Message Based on Email Verification Status** | Fixed the login success animation to display the correct message based on email verification status. Added `isEmailVerified` state to `Login.tsx` to capture verification status from the login response immediately. Updated `AuthContext.tsx` to make the `login` function return `Promise<User>` instead of `Promise<void>`, and added `return data.user` statements in both success paths. Changed the success overlay to use `isEmailVerified` state instead of `user?.isEmailVerified` context. Now verified users see "Authentication Successful! Redirecting to dashboard..." while unverified users see "Login Successful! Please verify your email..." ensuring accurate feedback during the login animation. |
| 130 | **Upload Documents: Auto-Redirect After All Docs Uploaded** | In `UploadDocuments.tsx`, updated `uploadDocument` to check `allRequiredDocsUploaded` from API response. On `true`, call `navigate('/application-status')`. Handles post-upload redirect automatically when all 6 documents are uploaded. |
| 131 | **Application Status: Document Upload Animation on Redirect** | Added `highlightedAppId` and `animatingDocs` state in `ApplicationStatus.tsx`. `useEffect` detects `location.state.updatedApplicationId`, triggers `docStatusChange` keyframe on badge and `highlightCard` keyframe on card. Auto-scrolls via `scrollIntoView`, clears after timeout. Fixed `DocumentUpload.tsx` navigation syntax to pass state object with `updatedApplicationId`. |
| 132 | **Loan Application: Split Loading States** | In `LoanApplication.tsx`, separated `checkingPersonalDetails` and `loading` conditions. Added submission-specific loading state with "Submitting Application" title and email confirmation message. |
| 140 | **Reference Number Display Fix** | Fixing display of loan reference numbers on underwriter dashboard and applicant `ApplicationStatus` to show full 24-character ID instead of only last 8 characters |
| 150 | **Underwriter Dashboard Skeleton UI Alignment** | Adjusting `UnderwriterTableSkeleton` component column widths to match actual table column dimensions in `UnderwriterDashboard.tsx` for consistent loading state presentation. Ensuring skeleton placeholders for Reference, Applicant, Contact, Amount, Status, Submitted, and Actions columns align with rendered table structure. |
| 161 | **CurrencyField Digit-Only Input** | Updated `CurrencyField` in `formfields.tsx` to support `onKeyDown` for handling key-level input restrictions. In `loanform.tsx`, added an `onKeyDown` handler to allow only digits, backspace, delete, arrow keys, and tab, preventing invalid characters from being typed into the loan amount field. |
| 166 | **IP Whitelisting System** | Built frontend interface for system admins to manage IP whitelisting. **API Service (`frontend/src/services/ipWhitelistService.ts`):** Created TypeScript functions with JWT authentication: `getCurrentIp`, `getIpWhitelist`, `addIpToWhitelist`, `removeIpFromWhitelist`, `toggleIpRestriction`. Provides type-safe communication with backend API. **Management Interface (`frontend/src/components/IpWhitelistSettings.tsx`):** Developed full-featured component displaying current IP, restriction toggle (disabled when no IPs exist), whitelist table (desktop)/cards (mobile), add/remove IP operations with confirmations, formatted timestamps, empty states, and warning badges. Uses centralized `IpWhitelistSkeleton` for loading states. Handles success/error alerts for all operations. **Login Security (`frontend/src/components/auth/Login.tsx`):** Added error handling for `IP_NOT_WHITELISTED` response code, displaying "Access denied: You are not authorized to login from this network. Please contact support." when users attempt login from non-whitelisted IPs. **Dashboard Access (`frontend/src/components/SystemAdminDashboard.tsx`):** Added "IP Whitelist Settings" card with Shield icon linking to `/settings/ip-whitelist`, giving system admins direct access to whitelist management. **Routing (`App.tsx`):** Added `/settings/ip-whitelist` route pointing to `IpWhitelistSettings` component, integrating whitelist management into app navigation. This frontend implementation allows system admins to view their current IP, add it to the whitelist, toggle restrictions on/off, and manage trusted IPs through an intuitive interface. When restrictions are enabled, login attempts from non-whitelisted IPs are blocked with clear error messages. |
| 169 | **Restoration Page Alert Styling** | Replace default browser alert on restoration request page with custom-styled confirmation modal matching the application's design system. |
| 170 | **Button Styling** | Standardize and style all buttons on restoration pages for both underwriter and system admin interfaces to match application design patterns. |
| 171 | **Universal Skeleton Loading Components** | Create centralized, reusable skeleton loading components and replace all custom loading indicators throughout the app with standardized skeletons, similar to the button styling approach. |
| 172 | **Account Deletion Confirmation Page & Clean Session Redirect** | Created `AccountDeleted.tsx` component as dedicated post-deletion landing page with farewell message, data removal summary, recovery contact option (mailto link to admin), and dual CTAs (Back to Login/Create New Account). Modified account deletion handler in profile management component to navigate to `/account-deleted` instead of `/`. Replaced `<Link>` components with `<a href>` tags in `AccountDeleted.tsx` to force full page reload, clearing React state/auth context and preventing stale token issues that caused brief "email verification required" flash before login redirect. Added `/account-deleted` route to `App.tsx` as public (non-protected) route. |
| 173 | **Profile History Collapsible Cards & IP Normalization** | Refactored `ProfileHistory.tsx` to support collapsible history entries with default open for the latest entry using `openCards` state and `toggleCard` handler. Added `normalizeIp` helper to display IPv4-mapped and IPv6 localhost addresses correctly (`::ffff:127.0.0.1` → `127.0.0.1`, `::1` → `127.0.0.1`). Updated history entry headers to be clickable, showing/hiding changed fields and profile snapshots, with arrow icon rotating to indicate expansion. Minor UI tweaks for smoother transitions and cleaner layout of entry headers and collapsible content. |
| 174 | **Underwriter Dashboard: Modularized** | Refactored monolithic `UnderwriterDashboard.tsx` (760+ lines) into focused modules: `types.ts` (interfaces), `searchFilterUtils.ts` (filter/sort logic), `SearchFilterBar.tsx` (search UI), `ApplicationsTable.tsx` (table/card views), `RestorationRequestModal.tsx` (modal component), and streamlined main `UnderwriterDashboard.tsx` (~290 lines). Improved maintainability, testability, and separation of concerns reduction in main component size. |
| 175 | **Revamping the UI** | Making the whole website, all the pages in the website more micor-interactive, and stylish yet giving a classy corporate look - make use of shimmers, and other hover animations. |
| 178 | **ProfilePage Modal Refactor & Re-render Optimization** | Extracted modal state and handlers from `ApplicantProfile`, creating `ProfilePage.tsx` wrapper to manage `showDeleteModal` and `deleteLoading` independently. Wrapped `ApplicantProfile` in `React.memo` and used `useCallback` for `onDeleteAccount` to prevent unnecessary re-renders. Rendered `DeleteAccountConfirmationModal` via `ReactDOM.createPortal` to isolate its mount/unmount from `ApplicantProfile`, ensuring stable UI behavior and eliminating repeated animations or click issues. Updated routes to load `ProfilePage` instead of `ApplicantProfile`. |
| 179 | **DeletedUsers Component Refactor & Modularization** | Refactored `DeletedUsers.tsx` from 650ish lines into 9 focused modules: `UserTableHeader`, `RoleBadge`, `UserTableRow`, `UserMobileCard`, `DeletedUsersStyles`, `DeletedUsersHeader`, `NoResultsState`, `UsersList`, and `useDeletedUsers`. Main component now 100ish lines, preserving all functionality, improving readability, maintainability, and separation of concerns. |
| 180 | **DeletedLoanApplications Component Refactor & Modularization** | Refactored `DeletedLoanApplications.tsx` from 700ish lines into 6 focused modules: `StatusBadge`, `SortIcon`, `SearchFilterBar`, `RequestsTable`, `RequestsMobileView`, and `ReviewModal`. Main component now 300ish lines, preserving all functionality including search, filters, sorting, table/mobile views, and restoration request management. Improved code organization, reusability, and maintainability. |
| 181 | **ApplicationStatus Search & Filter Integration** | Added search and filter functionality to `ApplicationStatus.tsx` by creating `SearchFilterBar` component and `searchFilterUtils.ts`. Implemented real-time search across loan type, reference ID, status, and amount fields. Added filter panel supporting status dropdown, amount range (min/max), and date range (from/to) filtering. Integrated `applyFilters()` utility to handle multi-criteria filtering with active filter count badge, "Clear All" button, and empty state showing "X of Y Applications" count. Customized search logic for ApplicationStatus-specific fields, excluding user details present in underwriter dashboard. |
| 182 | **Unified Search & Filter Bar Integration (Underwriter & Applicant Dashboards)** | Merged and standardized `SearchFilterBar` across both `UnderwriterDashboard.tsx` and `ApplicationStatus.tsx`. Created separate utility files — `searchFilterUtilsUnderwriter.ts` and `searchFilterUtilsApplicant.ts` — to handle dataset-specific search and filtering logic. Preserved independent search criteria for each (underwriter: applicant details, status, loan type; applicant: loan type, reference ID, status, amount). Ensured consistent UI/UX styling for empty states, gradient buttons, and filter panels while maintaining distinct backend logic for each dashboard. |
| 183 | **Search & Filter Bar Extension for Deleted Users (System Admin Dashboard)** | Extended `SearchFilterBar` component with optional customization props (`showAmountFilters`, `statusLabel`, `statusOptions`) to support role-based filtering without amount fields. Created `searchFilterUtilsDeletedUsers.ts` utility file with dedicated functions for searching across user fields (name, email, phone, role, company, city) and filtering by role and deletion date range. Updated `useDeletedUsers.ts` hook to integrate utility functions for cleaner state management. Modified `DeletedUsersHeader.tsx` to pass custom props: disabled amount filters, changed label from "Status" to "Role", and provided role-specific dropdown options (All Roles, Applicant, Underwriter, System Admin). Ensured backward compatibility with existing Underwriter and Applicant dashboards while adding flexible third use case for system administrators. |
| 185 | **Search & Filter Bar Integration for Deleted Loan Applications** | Refactored `DeletedLoanApplications.tsx` to use centralized `SearchFilterBar` component. Created `searchFilterUtilsRestoration.ts` with search/filter functions for restoration requests (applicant, underwriter, reference, reason, amount, status, dates). Updated `FilterState` to include `amountMin/amountMax` fields. Configured SearchFilterBar with custom props: enabled amount filters, "Request Status" label, and restoration-specific status options (Pending, Approved, Rejected). Removed legacy SearchFilterBar implementation while preserving all existing functionality. |
| 186 | **Loan Amount Column for Restoration Requests** | Added sortable "Loan Amount" column to `RequestsTable.tsx` and amount display to `RequestsMobileView.tsx`. Implemented amount sorting case in `DeletedLoanApplications.tsx`. Displays formatted currency (₹) using Indian locale. Respects existing `amountMin/amountMax` filters via `applyFilters()` utility. Shows "N/A" for missing data. |
| 188 | **Loan Type Cards Integration in Loan Apply Page** | Created new `LoanTypeCards.tsx` component with dynamic, responsive card UI for loan types. Updated `LoanApply.tsx` to integrate these cards, replacing old inline layout for cleaner structure and improved user interaction. |
| 191 | **Underwriter Dashboard Refactored to Redirection Page** | Refactored `UnderwriterDashboard.tsx` into a service selection page with two navigation cards. Created new `LoanApplications.tsx` component containing all original loan application management functionality. Updated `App.tsx` routing to include `/loan-applications` route for underwriters. |
| 192 | **Loan Application: Integrated LoanType Fetch by ID** | Replaced static loan type mapping with dynamic fetch. Added `LoanType` interface, `selectedLoanType` state, and `/loan-types/:id` API call. Updated `loanData` to store `loanTypeId`, passed new props to `LoanForm` and `ApplicationSummary`, and unified loading state for loan type and personal details checks. |
| 193 | **Application Summary: Added selectedLoanType prop and dynamic loan type display** | Replaced static `loanType` with `loanTypeId`, introduced `LoanType` interface, added `selectedLoanType` prop, and updated UI to display loan type title dynamically from fetched data. |
| 196 | **Frontend LoanType Refactor and Integration** | Replaced `loanTypeId` with `loanType` across applicant components (`ApplicationSummary`, `LoanApply`, `LoanForm`) and updated validation, payloads, and typings to reference `LoanType` ObjectIds. Enhanced search utilities to handle populated `LoanType` objects with name/title lookup. Ensures consistent LoanType usage and fixes undefined or mismatched type issues across the frontend loan application flow. |
| 197 | **Frontend LoanType Integration in Underwriter Dashboard** | Added `loanType` field to `LoanApplication` interface and updated `searchFilterUtilsUnderwriter.ts` to include loan type name in search results. Modified `ApplicationsTable.tsx` to display the loan type name instead of applicant contact details. Ensures populated loan type data is searchable and visible in the underwriter dashboard for better clarity and filtering. |
| 203 | **Skeleton Loader Alignment: Underwriter Dashboard Table** | Adjust underwriter-side loading skeletons so that column headings and skeleton widths align perfectly with their corresponding loaded table columns. |
| 204 | **Table Skeleton: Made headings generic for reusability across different tables** | Replaced specific column heading text with generic skeleton boxes of varying widths, allowing the same `UnderwriterTableSkeleton` component to be reused for Underwriter, Applicant, and Admin tables without width mismatches. |
| 205 | **Modal Flicker Fix: Eliminated background flash when opening LoanReviewModal** | Fixed by converting modal to React Portal, removing conflicting `transition-opacity` class from backdrop, adding `willChange` properties for optimized rendering, and adding `isolation: isolate` to `#root`. |
| 206 | **Loan Application Refactor: Modularized components and added dynamic form handling** | Split main loan application logic into `LoanApply`, `LoanForm`, and `FormFields` components, implemented reusable field rendering with props, improved state management for form data and loan type selection, and enabled dynamic updates and validation across nested components. |
| 208 | **ErrorMessage UI Simplification** | Refactored `ErrorMessage` component to match the visual style of `LoanForm`. Replaced bordered red container with a lightweight inline text layout using a red alert icon and concise typography for cleaner, more consistent form feedback. |
| 209 | **PersonalInfoStep Validation Expansion** | Enhanced `PersonalInfoStep` in `PersonalDetailsSteps.tsx` with full inline validation for all fields. Added dedicated handlers for first name, last name, date of birth, gender, and marital status with specific error messages and age verification logic. Improved user feedback consistency using `ErrorMessage` for each input field. |
| 210 | **ContactInfoStep Validation and Pincode State Sync** | Expanded `ContactInfoStep` in `PersonalDetailsSteps.tsx` with full field-level validation for email, phone, address, city, state, and pincode. Added inline error messages with consistent `ErrorMessage` usage. Enhanced pincode logic to manage validity states (`true`, `false`, `pending`) via `pincodeValid`, ensuring real-time syncing with API success/failure and automatic clearing of related errors upon valid lookup. |
| 211 | **EmploymentInfoStep Validation Enhancement** | Upgraded `EmploymentInfoStep` in `PersonalDetailsSteps.tsx` with comprehensive inline validation for all employment-related fields. Added dedicated change handlers for `employmentType`, `companyName`, `designation`, `workExperience`, and `monthlyIncome`, each with contextual error messaging. Implemented numeric and range checks for work experience and income, ensuring realistic input validation and consistent `ErrorMessage` rendering across all fields. |
| 212 | **validateStep Logic Alignment with New Validation Rules** | Updated `validateStep` to align with new inline validation logic across all personal detail steps. Reinforced field completeness checks, ensured Aadhaar and PAN patterns remain strict, and synchronized step 3’s numeric constraints with `EmploymentInfoStep` limits (₹1,000–₹1,00,00,000 and non-negative work experience). Maintained `pincodeValid === 'true'` enforcement for verified postal lookups. |
| 213 | **Refactor `PersonalDetailsStep` to Use Centralized Validation Rules** | Replaced inline field validation logic in `PersonalDetailsStep.tsx` with imports from the new `validationRules.ts`. Integrated `validateField` and `isFieldValid` utilities for consistent checks across personal, contact, and employment sections. Removed redundant regex and manual error handling, ensuring standardized error messages and age, Aadhaar, PAN, and income constraints align with centralized validation logic. |
| 214 | **Pincode Validation State on Mount** | Added `pincodeValid` optional field to `PersonalDetailsData` interface in types.ts and implemented `useEffect` in `ContactInfoStep` to automatically set `pincodeValid: 'true'` for existing database pincodes on component mount, eliminating redundant API calls and enabling navigation buttons immediately when landing on the contact info step. |
| 216 | **Error Message Scroll Enhancement** | Added `errorRef` using `useRef<HTMLDivElement `|` null>(null)` and implemented `useEffect` hook to automatically scroll error messages into view with smooth behavior after a 100ms delay when `error` state changes, improving UX by ensuring validation errors are always visible to users. Also refactored error display from inline animated div to use `ErrorMessage` component from StatusMessages. |
| 222 | **Register Form Validation Integration** | Integrated `validationRules.ts` validation by importing `validateField` and adding `fieldErrors`/`touchedFields` state management. Implemented `handleBlur` for on-blur validation and modified `handleChange` for real-time validation of touched fields. Added conditional error styling (red borders) to firstName, lastName, email, and phone inputs with `ErrorMessage` component from `StatusMessages` for error display. Created `isFormValid` function to disable submit button when form is invalid. Implemented `handlePhoneChange` with digit-only restriction (`maxLength={10}`) treating phone as optional field. |
| 224 | **Backend Interest Rate Integration for Loan Approval** | Modified `LoanApplication` interface in types file to support populated `loanType` as object with `interestRateMin`, `interestRateMax`, and other loan type properties alongside existing string enum values. Updated `ActionsTab.tsx` useEffect to dynamically calculate average interest rate from backend loan type data using `(interestRateMin + interestRateMax) / 2` when `loanType` is populated as object, with fallback to 12% for backward compatibility, eliminating hardcoded interest rates and ensuring approval details reflect accurate loan type configurations. |
| 225 | **AI Credit Risk Tab Integration** | Added `AICreditRiskTab` component to embed the deployed Streamlit credit risk model (`https://credit-risk-predictor-dedh.onrender.com/`) inside the MERN app. Replaced placeholder content with an iframe that renders the AI credit risk assessment UI, styled with responsive height, rounded borders, and shadow to integrate seamlessly with the existing loan application dashboard. |
| 227 | **Loan Type Management UX & Edit Enhancements** | Added smooth scroll to form on creating or editing a loan type using formRef and `scrollIntoView({ behavior: 'smooth' })`. Implemented highlight animation (`animate-highlight`) on form container for visual focus. Disabled Loan Name input during edit to prevent changes to identifier. Added “Currently Editing” badge and blue ring (`ring-2 ring-blue-400`) on the loan card being edited. Refined card transitions with `transition-all` and improved consistency in animations for editing and highlighting. |
| 228 | **Reset Password - Password Strength & Match Validation** | Added 5-level password strength indicator with color-coded bars (red/yellow/green). Implemented real-time password match validation with Check/X icons and colored borders. Enhanced visual design with corporate branding, animated states, gradient backgrounds, and security badges footer. |
| 229 | **All Applicants Page - Card Grid Redesign** | Replaced table with responsive card grid showing 2-3 key fields per applicant. Added "Visit Profile" button navigating to `/applicant-profile/:userId`. Implemented corporate header with avatar badge, staggered fadeInUp animations (0.05s delays), shimmer hover effects, and gradient overlays matching Login/Profile styling. Updated backend to allow `system_admin` role for profile viewing. |
| 232 | **AICreditRiskTab Refactor to Direct ML Prediction Workflow** | Replaced the old Streamlit iframe integration with a fully native prediction flow powered by the backend `/credit-risk/predict` API. Implemented local feature extraction from `LoanApplication` data (age, income, approval details, ratios), constructed a clean ML payload, and added request handling with loading states and displayed results. Introduced enhanced UI/UX with animations, hover effects, dynamic result rendering, and error handling, ensuring seamless interaction with the newly deployed FastAPI credit-risk microservice. Updated tab order in `LoanReviewModal.tsx` to conditionally place the AI Risk tab only when actions are available. |

### ⚡ In Progress (5)

| ID | Initiative | Status |
|----|-----------|--------|

| 151 | **System Admin Review Modal for Restoration Requests** | Implementing dedicated review modal for System Admin Dashboard restoration requests. Creating modal similar to `LoanReviewModal` that displays comprehensive loan applicant profile details and underwriter profile information before action execution. Consolidating three action buttons (Approve/Reject/Delete) from cluttered table "Actions" column into single "Review" button that opens modal. Modal contains tabbed or sectioned view showing applicant details, underwriter details, restoration reason, and action buttons with appropriate validation (rejection reason required, DELETE confirmation for permanent deletion). Improves UX by reducing table width and providing contextual information before decision-making. |
| 162 | **Unifying "Back to Dashboard" Buttons** | Standardizing the placement and styling of all "Back to Dashboard" buttons across the app to ensure consistent UX and make it easy for users to locate navigation options. |
| 200 | **Applicant-Side UI: Display Support Contacts** | Add visible support contact details of either the assigned underwriter or system administrator in applicant-facing emails and relevant UI pages for better accessibility. |
| 201 | **UI/UX Optimization: Reduce Empty Space and Add Microinteractions, Modify Error Message Displays** | Address excessive white space across the app by introducing subtle animations and compacting or merging adjacent data fields and components to improve layout density.
| 202 | **Loan Details Display: Total Repayment Summary** | After loan approval, display total repayment amount (Principal + Interest). For other statuses (pending, under_review, documents_requested), show only principal, interest rate, and tenure. |

---

## Backend Development, Security & Architecture

**Domain Focus:** Infrastructure development, security implementation, architectural optimization, and system scalability to ensure robust, maintainable, and enterprise-grade application foundation.

### ✅ Completed Initiatives (127)

| ID | Initiative | Description |
|----|-----------|-------------|
| 1 | **Project Initialization** | Initialized project repository and established version control with initial Git commits |
| 3 | **Database Migration** | Migrated database infrastructure from MongoDB Compass to MongoDB Atlas for enhanced scalability and cloud-based management |
| 4 | **Backend Refactoring** | Refactored backend server architecture through modularization, implementing improved file structure and optimized directory organization |
| 5 | **Password Management** | ~~Implemented User Password edit feature~~ *(Feature temporarily deprecated)* |
| 6 | **Authentication Workflow** | ~~Implemented password verification requirement for profile editing~~ *(Removed: Personal Details and KYC consolidated into unified system)* |
| 9 | **KYC Architecture Redesign** | ~~Implemented KYC system with dedicated UserKYC collection~~ *(Redefined: Transitioned to document-based verification model)* |
| 10 | **Multi-Application Support** | Implemented support for multiple concurrent loan applications per individual user |
| 11 | **Application Management** | Developed loan application deletion functionality with appropriate safeguards |
| 16 | **Account Management** | ~~Implemented user account deletion functionality~~ *(Temporarily removed pending PII-KYC logic separation)* |
| 17 | **Type Safety** | Resolved all TypeScript compilation errors to ensure type safety across the codebase |
| 21 | **Access Control System** | Implemented role-based access control system with new user roles, leveraging session authentication to enforce role-driven page navigation |
| 22 | **Protected Routing** | Developed role-protected routing with dynamic redirection based on user credentials and permissions |
| 23 | **Naming Conventions** | Established and enforced consistent naming conventions across pages, features, and user roles |
| 24 | **Underwriter Dashboard** | Developed specialized Underwriter Dashboard with role-specific functionalities and dedicated API endpoints for loan application and user data retrieval |
| 26 | **Routing Refactoring** | Refactored routing architecture from parameter-driven to state-driven navigation, implemented in DocumentsUpload page |
| 27 | **Modal Components** | Developed reusable modal components with dynamic customization capabilities based on user roles |
| 28 | **API Centralization** | Migrated to centralized Axios configuration (api.ts) for consistent API communication |
| 29 | **Token Management** | Implemented global token expiration handling with request interceptors for seamless authentication management |
| 30 | **Workflow Prerequisites** | Established prerequisite conditions for Underwriter actions on loan applications based on document upload status validation |
| 31 | **Error Handling** | Implemented global 403 Access Denied page for unauthorized access attempts |
| 32 | **Cross-Tab Synchronization** | Developed cross-tab authentication synchronization to handle logout events across multiple browser tabs |
| 33 | **Component Modularization** | Refactored LoanReviewModal into modular components for improved maintainability |
| 34 | **Architecture Restructuring** | Restructured entire project directory architecture for enhanced organization and scalability |
| 35 | **Document Management** | Implemented comprehensive review, download, and delete functionality for all uploaded documents |
| 37 | **State Machine Design** | ~~Designing comprehensive state machine logic for loan status transitions across pending ↔ under_review → approved/rejected/request_documents → pending states with bidirectional flow management~~ *(Slightly deprecated and merged with Task - 139)* |
| 39 | **Feature Deprecation** | Removed account deletion feature from production environment |
| 40 | **KYC Modularization** | Refactored KYC component into modular, reusable architecture |
| 41 | **Data Model Consolidation** | Consolidated UserKYC and Personal User Details collections into unified data model with corresponding frontend integration |
| 42 | **Dashboard Abstraction** | Refactored Dashboard page into role-agnostic modular components supporting Underwriter, Admin, and Applicant roles through dynamic state and parameter passing |
| 43 | **Input Validation** | Implemented comprehensive input validation for Aadhaar, PAN, and other sensitive fields, including SQL injection prevention and invalid data sanitization |
| 44 | **Request Optimization** | Resolved fire-and-forget model issue in KYC/PII form "Continue" button to ensure proper request completion |
| 46 | **Application Refactoring** | Refactored LoanApplication page into modular component architecture |
| 47 | **TypeScript Migration** | Migrated entire backend codebase from JavaScript to TypeScript for enhanced type safety and developer experience |
| 48 | **Deletion Authorization** | Reimplemented Loan Application deletion with role-based access control restricting deletion to Applicants only, including automatic UI refresh post-deletion |
| 51 | **Route Cleanup** | Performed comprehensive cleanup of unused backend routes across loans.ts, profile.ts, documents.ts, and auth.ts |
| 53 | **Permission Management** | Implemented role-based access control for LoanReviewModal features, restricting document upload/delete interactions based on user permissions |
| 57 | **Deletion Policy Evaluation** | Evaluated and implemented user profile deletion functionality with appropriate data retention policies *(Implemented under Task - 80)*|
| 58 | **Authorization Verification** | Implemented authentication verification to ensure only the authorized user can access delete functionality for applications and documents, with Underwriter-specific restrictions preventing deletion capabilities |
| 64 | **Address Automation** | Implemented automated pincode-based address autofill functionality |
| 65 | **Navigation Bug Fix** | Resolved navigation bug preventing users from completing profile when required fields existed on subsequent pages due to incomplete data validation blocking forward navigation |
| 66 | **Field-Level Validation** | Enhanced field-specific error display in Personal Details forms to show validation errors for individual inputs without requiring form submission |
| 67 | **Security Enhancement** | Implemented rate-limiting mechanism for failed CAPTCHA attempts to prevent brute-force attacks |
| 68 | **Edge Case Resolution** | Resolved edge case where repeated verification attempts for incorrect CAPTCHA answers inappropriately incremented attempt counter before modal closure |
| 69 | **Counter Reset Logic** | Implemented CAPTCHA attempt counter reset upon successful login to prevent persistent attempt tracking |
| 70 | **Audit Logging** | Implemented comprehensive audit logging system for all user details and KYC updates, recording timestamps in dedicated profile history collection |
| 71 | **Data Architecture Optimization** | Eliminated redundant applicant name storage in loan application collection by implementing reference-based architecture pointing to user collection |
| 73 | **User Guidance Enhancement** | Enhanced user experience in Personal Details form by adding input format specifications to labels/placeholders for Aadhaar, PAN, and DOB fields |
| 74 | **Production Deployment** | Deployed application infrastructure with Render for backend services and Vercel for frontend hosting |
| 76 | **Rate-Limiting Refinement** | Resolved critical issue combining rate-limiting on profile completion/update with validation errors by implementing step-specific partial data persistence through dedicated save route |
| 77 | **Rate-Limiting Audit** | Auditing rate-limiting implementation to ensure IP-based restrictions don't inadvertently affect legitimate users |
| 80 | **Soft-Delete User Accounts** | Added backend endpoints for soft-deleting (`DELETE /profile/me`) and restoring (`POST /profile/restore/:userId`) users, updated frontend `Profile.tsx` to show delete modal, handle deletion with API call, and prevent login post-deletion |
| 82 | **Profile Management Feature** | Added "View History" button to `Profile.tsx` with conditional rendering (underwriters + self-access) using `handleViewHistory()` handler. Created `ProfileHistory.tsx` with `useParams`, fetching from `/profile-history/${userId}`, displaying chronological changes with old/new value comparison, change type badges, timestamps, IP addresses, and field snapshots. Implemented `profileHistory.ts` backend: `GET /api/profile-history/:userId` with dual authorization (underwriters + self), ObjectId validation, rate limiting (30/min), sorted descending, limit 1-100 (default 50); bonus `/stats` endpoint for analytics. Added protected route `/profile/history/:userId` in `App.tsx` with `RoleProtectedRoute` for underwriters and applicants. Registered `/api/profile-history` in server. Security via role-based access at frontend (conditional UI) and backend (auth middleware) |
| 83 | **Permissions Framework** | Finalizing decision framework for user profile deletion permissions and implementation approach |
| 84 | **Tab Switching Logic** | Implemented automatic tab switching from Actions to Application Details upon loan approval/rejection to prevent error states from unauthorized Actions tab access post-decision |
| 85 | **Environment Configuration** | Resolved environment-specific API endpoint discrepancies for document view/download functionality between local and deployed environments |
| 86 | **Storage Migration** | Migrated document storage from Render's ephemeral filesystem to persistent GridFS solution to ensure data durability across redeployments |
| 87 | **Workflow Automation** | Implemented automatic loan status transition from "pending" to "under_review" upon completion of required document uploads |
| 88 | **Data Protection** | Implemented frontend and backend safeguards preventing deletion of approved loan applications |
| 89 | **Audit Trail System** | Implementing comprehensive audit trail system ensuring all deletion operations are logged rather than permanently removed from database |
| 90 | **Attribution Bug Fix** | Resolved "Updated by: Unknown" display issue by adding `updatedBy` and `comment` fields to status history for all loan application status updates across all user actions |
| 98 | **Document Protection** | Implemented frontend and backend safeguards preventing deletion of documents associated with approved loan applications |
| 99 | **Data Archival Strategy** | ~~Designing and implementing redundant data archival strategy for deleted documents, loan applications, and user profiles~~ *(Deprecated: (ONLY LOANS AND PROFILES) Document Deletion should not be archived/soft. Profile deletions are soft already, implemented in Task - 80, only pending function is the soft delete the loan applications themselves)* |
| 101 | **Architecture Review** | Assessed data fetching strategy for Underwriter dashboard, confirmed client-side filtering provides better UX and performance for current application volume |
| 104 | **Email Verification Gate for ApplicantDashboard** | Added email verification check to ApplicantDashboard - introduced isEmailVerified state, updated API call to fetch verification status, added red-themed email verification banner prompting users to check inbox, and modified logic to only display "Personal Details Required" section and "Complete Profile" button after email is verified, ensuring users must verify email before accessing profile completion |
| 105 | **Email Verification System** | Added `isEmailVerified`, `verificationToken`, and `verificationTokenExpiry` fields to the User schema, enabling backend support for email verification workflows |
| 106 | **Email Verification Endpoints** | Implemented `/verify-email` and `/resend-verification` routes with rate limiting (max 3 resends/hour), enabling secure and efficient backend handling of email verification and onboarding |
| 107 | **Email Service & Templates** | Created `emailService.ts` for sending verification, welcome, and resend emails via Nodemailer, and `emailTemplates.ts` for dynamic, branded HTML templates supporting LOANLO’s onboarding and account activation flow |
| 108 | **Verify Email Page (Frontend)** | Created `VerifyEmail.tsx` with full UI/UX for verifying, resending, and handling expired email links — featuring animated status states, secure redirects, and LOANLO-branded design |
| 109 | **Email Verification Gate (Personal Details)** | Added email verification check in `PersonalDetails.tsx`, restricting access to unverified users with a branded warning UI and redirect option to dashboard |
| 110 | **Email Verification & Auth Enhancements** | Extended `AuthContext.tsx` to include `isEmailVerified` in `User`, added `verifyEmail` and `resendVerification` methods, updated `register` to indicate if verification is required, enabling email verification flows across the app |
| 112 | **Auth Flow: Enable Registration Success Screen** | Modified `register()` in `AuthContext.tsx` by removing immediate user state update, allowing `requiresVerification` flag to trigger success screen display with email verification instructions before user proceeds to dashboard |
| 113 | **Auth Flow: Use ALLOWED_ORIGINS for Verification Link** | Modified email verification link generation to parse `ALLOWED_ORIGINS` environment variable instead of hardcoding `FRONTEND_URL`, ensuring correct link in both development and production environments |
| 115 | **Auth Flow: Post-Registration Login Behavior** | Implemented new flow for user access after successful registration — enabling login only after email verification via the verification link |
| 116 | **Auth Flow: Add Email Verification Required Component** | Created `EmailVerificationRequired.tsx` to display a dedicated screen prompting users to verify their email before accessing their account, with resend functionality, error handling, and navigation back to login for unverified users |
| 117 | **User Schema: Fix Optional Type Definitions** | Updated `IUser` interface in `User.ts` to explicitly allow `undefined` for `verificationToken` and `verificationTokenExpiry` fields, resolving strict TypeScript errors under `exactOptionalPropertyTypes` mode |
| 118 | **Router Structure: Fix AuthProvider Hook Context** | Restructured component hierarchy to wrap `<AuthProvider>` inside `<Router>` instead of vice versa, enabling `AuthContext` to use `useNavigate()` hook for programmatic navigation during authentication flows (e.g., redirecting to email verification page after login with unverified email) |
| 120 | **Auth Flow: Unified Resend Verification for Authenticated & Unauthenticated Users** | Refactored `/resend-verification` route in `backend/routes/auth.ts` to support both authenticated (token-based) and unauthenticated (email-based) requests, removing the need for forced login before verification. Implemented security-safe response for non-existent emails. Updated `AuthContext.tsx` to automatically include the user’s email in the resend request when available, ensuring smooth behavior for both logged-in and pending-verification users. This improves usability, maintains security, and aligns frontend–backend verification flow. |
| 121 | **Auth Flow: Fix Email Verification Double-Call and Already-Verified Error** | Resolved critical bug where clicking verification link would briefly show success then immediately display "Verification Failed: Email is already verified" error. Modified backend `auth.ts` to return success response (200) instead of error (400) when email is already verified, and fixed Mongoose field deletion using `undefined`. Updated `AuthContext.tsx` to prevent duplicate verification API calls using `useRef` flag and removed redundant second `/auth/verify` call causing race conditions. Enhanced `VerifyEmail.tsx` with `useRef` to prevent React StrictMode double-execution, simplified `useEffect` dependencies to only track token value, added graceful "already verified" handling to show success screen, and fixed template literal bug in dashboard navigation. |
| 123 | **Email Service: Migrated from SMTP to SendGrid API** | Replaced Nodemailer SMTP configuration with SendGrid API integration in `emailService.ts`, simplifying deployment and ensuring reliable email delivery on cloud platforms. Updated `.env` to use `SENDGRID_API_KEY` and `EMAIL_FROM` instead of SMTP credentials. |
| 124 | **Email Verification: Merged duplicate components into single intelligent component** | Consolidated `VerifyEmail.tsx` and `EmailVerificationRequired.tsx` into a single `EmailVerification.tsx` component that intelligently handles both token-based verification (from email links) and awaiting verification states. The component detects URL token presence to determine flow, eliminating ~400 lines of duplicate code while maintaining all functionality. Updated `App.tsx` routing to use single component for both `/verify-email` and `/email-verification-required` paths. |
| 125 | **Email Verification: Implemented automatic login after email verification** | Modified backend `/auth/verify-email` endpoint to return JWT token upon successful verification, enabling seamless auto-login. Updated `AuthContext.verifyEmail()` to store token in localStorage and update user state. Enhanced `EmailVerification.tsx` to check for token after verification and automatically redirect users to their dashboard via root route, eliminating the need for manual login post-verification. Users now experience a smooth flow: click verification link → see success message → auto-redirect to dashboard. |
| 128 | **SMTP Email Transport** | ~~Tried switching email delivery system from SendGrid back to SMTP with Nodemailer for improved control and reliability~~ *(Deprecated: Render and most free hosting providers block SMTP; use an email API (SendGrid, Resend, Mailgun) instead.)* |
| 129 | **Automated Email Notifications: Implemented comprehensive loan application email system** | Created modular email system with separate templates (`loanApplicationSubmittedTemplate.ts`, `loanStatusUpdateTemplate.ts`, `newApplicationNotificationTemplate.ts`, `documentsRequestedTemplate.ts`) and centralized `loanEmailService.ts` using SendGrid. Integrated four notification triggers into `routes/loans.ts`: applicant confirmation on submission, status updates with conditional approval/rejection content, underwriter alerts via `UNDERWRITER_EMAILS` env variable on review submission, and document request notifications. Modified endpoints (`/apply`, `/update-status/:applicationId`, `/request-documents/:applicationId`, `/:applicationId/submit-for-review`) to trigger emails with responsive HTML templates, application tracking, and dashboard links. |
| 133 | **Profile Page & Navigation Button** | Created `Profile.tsx` with comprehensive user information display including personal details, identity documents, contact info, employment details, and account status — featuring sectioned layouts, formatted data display, and edit profile CTA. Added Profile navigation button to `DashboardHeader.tsx` with user icon, hover effects, and route integration for seamless profile access |
| 134 | **Restore Account Endpoint (Frontend)** | Implementing frontend UI and API integration for admin-triggered account restoration via `POST /profile/restore/:userId` |
| 135 | **Underwriter Profile Access** | Added "Visit Profile" button to `ApplicationDetailsTab.tsx` with role-based visibility (underwriters only) using `User` icon, `useNavigate` hook, and `handleVisitProfile()` handler. Created backend route `GET /api/profile/:userId` in `profile.ts` with underwriter-only authorization, ObjectId validation, and soft-delete checks. Modified `Profile.tsx` to support dual-mode operation via `useParams` - dynamically fetching `/profile/me` or `/profile/${userId}`, conditional header/button rendering (back button for underwriter view, edit/delete hidden for other profiles). Added protected route `/profile/:userId` in `App.tsx` with `RoleProtectedRoute`. Security enforced at frontend (conditional rendering) and backend (role validation) |
| 136 | **Underwriter Email Notifications: Moved auto-review email trigger to document upload** | Refactored email logic for underwriter notifications by moving it from the unused `/submit-for-review` route to the `/upload` route. Now, when the final required document is uploaded and the application status auto-updates to `under_review`, underwriters receive notification emails and applicants receive status update emails. Discovered that the frontend “Submit for Review” button was never rendered due to automatic status updates, allowing removal of redundant UI elements. |
| 137 | **Approval/Reject Comments Visibility** | Evaluating how and where underwriter comments on approvals/rejections should be visible to applicants (modal or email) |
| 138 | **Loan Action History Attribution** | Fixing underwriter actions on loan applications being logged as "unknown" in status history |
| 139 | **Request for Additional Documents** | ~~Auditing backend support and UX for additional document requests (requesting for additional documents would change status from under_review to documents_requested, which on uploading, should change to under_review again, and in case of any inconsistencies/issues with the documents uploaded, underwriter should be able to "request for re-upload of particular/all documents, which would change status from under_review to pending, if the main required documents are re-asking for uploading, else, should move from under_review to documents_requested), ensuring `UploadDocuments.tsx` renders "additional documents" only after underwriter request, improving frontend headings/subheadings to distinguish required vs additional documents, and verifying Indian mandatory vs additional document requirements~~ *(Slightly deprecated and merged with Task - 37)*|
| 141 | **Global Utils Refactor & Time-Based Greeting** | Moved `utils.ts` from `loan/loanreviewmodal/` to top-level `frontend/src/components/utils.ts` to improve reusability across shared components like `DashboardHeader.tsx` and `Profile.tsx`. Removed redundant re-exports from `loanreviewmodal/index.ts`. Updated all dependent imports to reference the new global utils path. Added new `getGreeting()` utility to generate dynamic greetings based on the current time of day. |
| 142 | **Soft-Delete Loan Applications** | Added `isDeleted` and `deletedAt` fields to `LoanApplication` model, modified `DELETE /:applicationId` endpoint to perform soft delete instead of hard delete, added pre-find middleware to automatically exclude deleted applications from queries, and created optional endpoints for restoring (`PATCH /restore/:applicationId`) and viewing deleted applications (`GET /deleted` for underwriters) |
| 143 | **View Deleted Loan Applications (Underwriter)** | Added toggle button in `UnderwriterDashboard.tsx` to switch between active and deleted applications view, created `fetchDeletedApplications` function and state management for deleted applications, implemented `GET /loans/deleted` endpoint for underwriters to retrieve soft-deleted applications, and modified pre-find middleware in `LoanApplication` model to allow explicit querying of deleted documents when `isDeleted: true` is specified |
| 144 | **Restore Deleted Loan Applications (Underwriter)** |~~ Added restore confirmation modal in `UnderwriterDashboard.tsx` requiring "RESTORE" text input for verification, conditionally rendered "Restore" buttons in place of "Review" buttons when viewing deleted applications, and implemented `handleRestoreClick` and `handleRestoreConfirm` functions to manage restoration workflow with dual list refresh~~ *(Deprecated: Underwriters now cannot restore deleted loan applications on their own. System admin must review a "request" for the restoration of an applicant soft-deleted loan application, which would be raised by the underwriter - Refer to Task 148)* |
| 145 | **View & Restore Deleted User Profiles (Underwriter)** | ~~Add toggle button in `UnderwriterDashboard.tsx` to switch between active and deleted user profiles, implement `GET /profile/deleted` endpoint for underwriters to retrieve soft-deleted user accounts, create restore confirmation modal requiring text verification, and add `PATCH /profile/restore/:userId` endpoint with frontend handlers to restore deleted user profiles with list refresh~~ *(Deprecated: Only system admins can view deleted profiles, and only applicants can request for their accounts to be restored. Refer to Task 149)* |
| 146 | **Restrict Deleted Records Access to System Admin** | ~~Update authorization middleware to restrict viewing and restoring soft-deleted loan applications and user profiles to `system_admin` role only, remove deleted records access from underwriter dashboard, add permanent delete endpoints (`DELETE /loans/permanent/:applicationId` and `DELETE /profile/permanent/:userId`) for system admins, and implement role-based access control checks in all relevant backend routes~~ *(Deprecated - refer to task numbers 144, 145 and 148)* |
| 148 | **Restoration Request System & System Admin Dashboard** | Implemented comprehensive restoration request workflow for soft-deleted loan applications. Created `RestorationRequest` MongoDB schema with pending/approved/rejected status tracking, unique constraint preventing duplicate pending requests per application, and performance-optimized indexes. Extended `loans.ts` routes with 6 new endpoints: `POST /request-restoration/:applicationId` (underwriter role), `GET /restoration-requests` (system_admin role with manual population workaround for soft-deleted apps), `POST /restoration-requests/:requestId/approve`, `POST /restoration-requests/:requestId/reject`, `DELETE /permanent-delete/:applicationId` (cascading deletion of application + documents + restoration requests), and `GET /my-restoration-requests` (underwriter-scoped). Removed direct `/restore/:applicationId` PATCH endpoint. Refactored `UnderwriterDashboard.tsx` to replace immediate restore functionality with request-based workflow: added `fetchPendingRestorationRequests()` to track user's pending requests, replaced restore button with conditional rendering showing "Awaiting Admin Review" (Clock icon) for pending requests or "Request Admin" button, and implemented restoration request modal with textarea validation (10-500 chars). Built complete `SystemAdminDashboard.tsx` from scratch with full CRUD operations for restoration requests: search/filter/sort functionality (reference, applicant, underwriter, status, date), three-action review modal (approve/reject/permanent delete) with validation (mandatory rejection reason, DELETE confirmation text), status badges (Clock/CheckCircle/XCircle icons), pending request counter, and mobile-responsive card/table views. Enforces role-based access control across all endpoints (underwriter vs system_admin separation). |
| 149 | **User Profile Restoration System** | Implementing user profile restoration workflow within System Admin Dashboard. Adding view for deleted user profiles ~~with restoration request functionality that applicants can initiate for their own accounts. System admin reviews submitted requests and approves/rejects based on evaluation. Follows similar pattern to existing loan application restoration system with role-based access control (applicant self-request, system_admin review).~~ *(Slight Deprecation: No requests can be raised by the Applicant/User right now, if their account/profile is deleted. They are expected to contact the help centre to communicate and request for account restoration)* |
| 152 | **Loan & Profile Email Notifications** | Expanded `loanEmailService.ts` to send emails for all application and profile lifecycle events: application submission, status updates, document requests, deletion (applicant + underwriters), underwriter restoration requests (confirmation + admin notification), restoration outcomes (approved/rejected), application restoration (applicant), profile deletion (applicant, underwriters, admin), and profile restoration (applicant, underwriters). Updated backend routes (`profile.ts`, `loans/admin.ts`, `loans/underwriter.ts`, `loans.ts`) to trigger these emails on the corresponding actions. |
| 153 | **Restoration Request: Enhance Application Restore Logic** | Updated `/restoration-requests/:requestId/approve` route to explicitly query only deleted applications, prevent restoring already approved applications, add audit trail entry in `statusHistory`, and include detailed response data with `applicationId` and current status |
| 154 | **Loans Route: Modularized** | Refactored monolithic `loans.ts` (900ish lines) into role-based modules: `loans.ts` (applicant routes), `loans/underwriter.ts`, `loans/admin.ts`, and `loans/shared.ts`. Implemented `requireRole()` middleware for router-level authorization, eliminating redundant per-route checks. |
| 156 | **Profile Routes: Role-Based Separation** | Refactored `Profile.tsx` into `ApplicantProfile.tsx` (full details) and `StaffProfile.tsx` (minimal info). Updated routes in `App.tsx` and dynamic routing in `DashboardHeader.tsx` based on user role. |
| 157 | **User Model: Soft-Delete Query Flexibility** | Updated `User.ts` pre-find middleware to exclude soft-deleted users by default **only when `isDeleted` isn’t explicitly queried**. This allows fetching deleted users when needed (e.g., for restoration) without affecting normal queries. |
| 158 | **Loan Application: Track User Deletions** | Updated `DELETE /:applicationId` route to record soft deletions in `statusHistory` with comment `'Application deleted by user'`. This preserves the deletion context for auditing and prevents restoring applications deleted intentionally by users. |
| 159 | **System Admin Restoration Management & Cascading User Deletion** | Redesigned `SystemAdminDashboard.tsx` into navigation hub linking to two new pages: `DeletedLoanApplications.tsx` (restoration request CRUD with approve/reject/permanent-delete) and `DeletedUsers.tsx` (soft-deleted user management with restore/permanent-delete). Added 3 admin endpoints to `profile.ts`: `GET /admin/deleted-users`, `GET /admin/all-users`, `DELETE /admin/permanent-delete/:userId`. Implemented CASCADE logic: `DELETE /me` soft-deletes user's loan applications with statusHistory tracking; `POST /restore/:userId` restores only cascade-deleted applications. Added system_admin RoleProtectedRoute entries to `App.tsx`. |
| 160 | **Deleted Loan Applications: Filter by Active Users** | Updated `GET /deleted` route to only return soft-deleted loan applications whose associated users are still active. This prevents showing applications of users who themselves have been deleted. |
| 164 | **Auth Route: Modularized** | Refactored monolithic `auth.ts` (500ish lines) into modular architecture: `routes/auth.ts` (route definitions only), `controllers/authController.ts` (request/response handlers), `services/authService.ts` (auth business logic), `services/captchaService.ts` (captcha logic), `middleware/rateLimiters.ts` (rate limiting configs), `middleware/captchaRateLimiter.ts` (captcha rate limiting), and `utils/captchaStore.ts` (in-memory captcha tracking). Separated concerns following single responsibility principle, improving maintainability, testability, and code reusability. |
| 165 | **IP Whitelisting System** | Implemented backend IP whitelisting for system admin login security. **User Model (`backend/src/models/User.ts`):** Added `ipWhitelist` array (stores `ip`, `description`, `addedAt`, `addedBy`) and `allowIpRestriction` boolean to enable/disable IP checks per user. **Service Layer (`backend/src/services/ipWhitelistService.ts`):** Created functions to add/remove IPs with duplicate prevention, fetch user whitelists, toggle restrictions (requires minimum one IP), and validate IP formats. Enforces `system_admin` role for all operations. **Controller (`backend/src/controllers/ipWhitelistController.ts`):** Handles requests for getting current client IP, managing whitelist CRUD operations, and toggling restrictions. Returns appropriate HTTP status codes (400/403/500) and normalizes IPv4-mapped IPv6 addresses. **Middleware (`backend/src/middleware/ipWhitelist.ts`):** Created `checkIpWhitelist` to block unauthorized IPs when `allowIpRestriction` is enabled. Includes `getClientIP` (extracts real IP from proxies/headers) and `normalizeIP` (standardizes IPv6-mapped IPv4). Logs all access attempts and returns 403 for blocked IPs. **Routes (`backend/src/routes/ipWhitelist.ts`):** Established `/api/ip-whitelist` endpoints: GET `/current-ip`, GET `/` (whitelist), POST `/add`, DELETE `/:ipId`, PATCH `/toggle`. All require authentication via `authenticateToken`. **Server Integration (`backend/src/server.ts`):** Applied `checkIpWhitelist` middleware to protect all `/api/*` routes (loans, documents, profiles, profile-history) while keeping auth routes public. Updated CORS to support PATCH requests. Modified auth verify route (`backend/src/routes/auth.ts`) to include IP whitelist checks, ensuring token verification respects IP restrictions. This architecture allows system admins to control which IPs can access protected endpoints when restrictions are enabled, with automatic enforcement across all sensitive API routes. |
| 184 | **Soft-Delete Handling & Restoration Requests Update** | Updated `LoanApplication` model to allow `userId` as `Types.ObjectId | IUser | null` for proper population handling. Fixed `/details/:applicationId` route in `loans.ts` to safely check `application.userId` before access validation. Refactored `/restoration-requests` route in `admin.ts` to exclude soft-deleted applications and users, ensuring only active applications and non-deleted users are returned, with proper null filtering and population logic. |
| 187 | **Restoration Requests: Filter and Populate Active Users** | Updated `GET /restoration-requests` route to include only requests made by active (non-deleted) users and exclude those tied to deleted applicants, while still fetching applications regardless of deletion status for context. |
| 189 | **Loan Type Management Module Added** | Implemented full loan type management system. Created `loanTypeModel.ts` schema with validation and timestamps. Added `loanTypeController.ts`, `loanTypeService.ts`, and `loanTypeRoutes.ts` for CRUD and toggle operations. Integrated new `LoanTypeCards.tsx` to fetch and display active types dynamically with icons and colors. Built `LoanTypeDetails.tsx` admin UI for creating, editing, and managing loan types with validations and backend sync. |
| 190 | **Loan Type Selection - Separate Page Implementation** | Created new `LoanTypeSelection.tsx` page for loan type selection with card grid UI. Refactored `LoanApply.tsx` to remove inline loan cards and receive selected loan type via `location.state`, added selected loan badge with change option. Updated router to add `/select-loan-type` route and navigation links to redirect users to selection page before application form. |
| 194 | **Loan Type Reference Integration** | Updated `LoanApplication` schema to reference the `LoanType` model instead of using string enums, importing `ILoanType` and adjusting the `loanType` field to store an ObjectId with population support. |
| 195 | **LoanType Integration Across Loan Workflows** | Populated and validated `loanType` in all major routes (upload (`documents.ts`), applicant (`loans.ts`), `admin.ts`, `underwriter.ts`) and email notifications. Replaced raw ObjectIds with populated `LoanType` data, ensuring correct `name/title` usage and fixing undefined loan type issues across loan creation, updates, restoration, and document workflows. |
| 207 | **Backend Refactor & Feature: Centralized loan application validation middleware** | Introduced and integrated `validateLoanApplication` middleware to handle loan type existence, status, amount limits, tenure, and purpose validation; removed inline validation from `POST /apply`, improved request validation flow, and passed validated loan type via `req.validatedLoanType` for cleaner, reusable backend logic. |
| 215 | **Backend Validation: Alignment with Frontend Rules** | Updated backend `validation.ts` to match frontend's stricter validation rules, ensuring the backend acts as the final security gate. Added age ≥18 verification, minimum length checks for names (2 chars), address (10 chars), and company fields, income range validation (₹1,000–₹1,00,00,000), and consistent trimming of all string fields before regex pattern testing to prevent whitespace bypasses. |
| 217 | **Backend Refactor: Migrated User and LoanApplication models to Mongoose timestamps** | Replaced manual `createdAt`/`updatedAt` field definitions with Mongoose's built-in `timestamps: true` option in User, LoanApplication, and LoanType schemas; removed redundant `pre('save')` hooks for `updatedAt`; ensures automatic and consistent timestamp management across all database operations (save, update, findOneAndUpdate) without requiring frontend or API route changes. |
| 218 | **System Admin Feature: Added All Applicants View and Route Integration** | Implemented new backend and frontend functionality for system admins to view all undeleted applicant accounts. Added `applicants.ts` backend route (`/api/applicants/all`) restricted to `system_admin` via authentication and role middleware; created minimal `AllApplicants` React component to fetch and display applicants in a simple table; updated `SystemAdminDashboard.tsx` with a new “All User Profiles” card linking to `/admin/all-users`; integrated frontend route in `App.tsx` using `RoleProtectedRoute`; registered backend route in `server.ts`. |
| 219 | **Backend Enhancement: Migrated email service from App Password to OAuth2 authentication** | Replaced Gmail App Password with OAuth2 using Google APIs and dynamic access token generation; improves security and reliability by eliminating static password storage; requires new environment variables (GMAIL_OAUTH_CLIENT_ID, GMAIL_OAUTH_CLIENT_SECRET, GMAIL_OAUTH_REFRESH_TOKEN) and removal of GMAIL_APP_PASSWORD. |
| 220 | **Backend Enhancement: Migrated loan email service from SendGrid to Gmail API with OAuth2** | Replaced SendGrid email delivery with Gmail API using OAuth2 authentication for loan-related notifications; converted all 15 email functions (application submissions, status updates, underwriter notifications, restoration requests, profile management) to use `sendGmailAPIEmail` helper function with base64 encoding; maintains all existing functionality while improving security and eliminating SendGrid dependency; uses existing OAuth2 environment variables (GMAIL_OAUTH_CLIENT_ID, GMAIL_OAUTH_CLIENT_SECRET, GMAIL_OAUTH_REFRESH_TOKEN) already configured in emailService.ts. |
| 221 | **Email Enhancement: Added Restoration Contact Options for Deleted Applications and Profiles** | Added "Deleted by mistake?" contact sections to applicant emails for both application deletion and profile deletion scenarios; application deletion emails now include a "Contact Underwriter" button with pre-filled mailto link for restoration requests; profile deletion emails now include a "Contact Support" button linking to system admin email; both buttons use prominent warning-styled boxes with URL-encoded mailto parameters (subject, body) for seamless user experience when requesting restoration assistance. |
| 223 | **Input Sanitization: Replace HTML Entity Encoding with XSS Protection** | Replaced `validator.escape()` with `xss` library sanitization for text fields (firstName, lastName, address, city, state, companyName, designation) to prevent special characters like `/`, `'`, `&` from being stored as HTML entities while maintaining protection against XSS and injection attacks. |
| 226 | **Password Reset: Implement Complete Forgot Password Flow** | Created `passwordResetController.ts` with token-based reset endpoints, `ForgotPasswordModal.tsx` for email submission, `ResetPassword.tsx` for password update page, added `passwordResetEmailTemplate` to `emailTemplates.ts`, `sendPasswordResetEmail` to `emailService.ts`, `resetPasswordToken` and `resetPasswordTokenExpiry` fields to User model, three new auth routes (`/forgot-password`, `/reset-password/:token`, `/verify-reset-token/:token`), and integrated "Forgot Password?" link in Login page with 30-minute token expiry and email verification |
| 230 | **Standalone ML Service Setup for Credit Risk Predictions** | Added a dedicated `credit-risk-ml` directory containing serialized model files (`.pkl`), `main.py` for prediction execution, and a clean `requirements.txt` for isolated Python dependencies. Structured the ML folder for independent deployment, ensured compatibility with the Node backend’s `/predict` endpoint, and included all necessary artifacts for seamless integration between services. |
| 231 | **Credit Risk Prediction Route Integration with External ML Service** | Added new `creditRisk.ts` Express route for forwarding prediction requests to the FastAPI ML microservice with environment-based URL switching. Updated `server.ts` to register the `/api/credit-risk` endpoint, ensuring CORS consistency, protected routing flow, and seamless communication with the deployed Python model. Included environment-variable support for production ML endpoint while maintaining localhost fallback for development. |
| 236 | **Auto-Logout Implementation for Inactive Sessions** | Added 15-minute inactivity timeout by introducing `lastActivity` field to User model and updating authentication middleware to track activity on each request. Modified `auth.ts` to check inactivity duration and return 401 with `SESSION_EXPIRED` code when threshold exceeded, while automatically updating timestamp for active sessions. Updated `User.ts` schema with `lastActivity` field, enabling automatic session expiration across all authenticated routes. |
| 237 | **Session Management System for Remote Logout** | Created `models/Session.ts` to track all user login sessions with device info, IP address, and activity timestamps. Added `controllers/sessionController.ts` with endpoints for viewing and terminating sessions (individual or bulk). Updated `middleware/auth.ts` to validate active sessions on each request and handle inactivity timeouts. Modified `controllers/authController.ts` to create session records on login with parsed device/browser info. Extended `routes/auth.ts` with session management routes for users and system_admin role. Implemented complete audit trail tracking who terminated which sessions and why (user logout, admin action, timeout, or security). |

### ⚡ In Progress (23)

| ID | Initiative | Status |
|----|-----------|--------|
| 52 | **OAuth Integration** | Integrating Auth0/OAuth authentication infrastructure for enhanced security and third-party authentication support |
| 59 | **Business Logic Definition** | Defining business logic for multiple concurrent loan applications, including eligibility criteria and user categorization |
| 60 | **Interface Optimization** | Auditing and optimizing interfaces and props across components to remove unused fields and improve type safety |
| 63 | **Location Services** | Implementing Google Maps location pinpointing functionality, modernizing pincode loading animations, and evaluating component modularization opportunities |
| 72 | **Middleware Restructuring** | Evaluating middleware restructuring including potential renaming of auth.ts to middleware.ts and refactoring of routes/auth.ts |
| 75 | **AI Integration** | Integrating XGBoost-based AI risk prediction and credit assessment model from standalone Streamlit application into MERN stack architecture |
| 91 | **Conflict Resolution** | Implementing conflict resolution mechanism for concurrent document deletion by Applicant during Underwriter approval process |
| 100 | **Security Evaluation** | Evaluating security requirements for personal data storage, including potential implementation of salting and hashing mechanisms |
| 102 | **Session Management** | Implementing automatic session timeout and logout functionality after defined period of user inactivity |
| 126 | **Google reCAPTCHA Integration** | Replacing custom numeric CAPTCHA with Google reCAPTCHA for enhanced bot protection |
| 127 | **Passwordless Authentication** | Implementing Google passwordless login/signup to replace traditional email and password authentication |
| 147 | **System Admin Database Overview Dashboard** | Create comprehensive system admin dashboard to display all database tables (Users, LoanApplications, Documents, etc.), implement data grid views with filtering and sorting for each table, add statistics and analytics widgets showing total records, active/deleted counts, and recent activity including logs of logging in (flagging of suspicious activities), and provide navigation between different database collections with read-only access to all fields |
| 155 | **Database Transaction Session** | Implement MongoDB transaction sessions to ensure atomic operations and maintain database consistency across related updates |
| 163 | **State Machine & Additional Document Flow** | Combined state machine design for loan status transitions with integrated support for additional document requests. Status flows handle: pending ↔ under_review → approved/rejected/request_documents → pending, including underwriter-triggered requests for re-upload of particular/all documents. Frontend `UploadDocuments.tsx` now renders "additional documents" only after underwriter request, with improved headings/subheadings to distinguish required vs additional documents, ensuring proper handling of Indian mandatory vs additional document requirements. |
| 167 | **IP Whitelist Implementation Review** | Audit all IP whitelist-related pages and code added in tasks 165 and 166 to verify what's actually needed and being used. Check which pages are restricted by IP whitelist and which aren't. Identify any unused components, services, or routes that can be removed or consolidated for cleaner implementation. |
| 168 | **Global Support Contact Link** | Add a "Contact Support" link on every page of the website and every mail that gets sent to all the users of the application for consistent user access to help and assistance. |
| 176 | **Loan Email Service: Refactor & Modularization** | Refactoring the large `loanEmailService.ts` (~830 lines) into smaller, modular hooks/functions grouped by feature (application emails, restoration emails, profile emails, underwriter/admin notifications) to improve readability, maintainability, and testability. |
| 177 | **Profile Restoration: Admin Reason & History Tracking** | Implemented system admin prompt for restoration reason when restoring a user profile, similar to loan application restoration. Added `ProfileHistory` model to track deletion timestamps, user-provided deletion reasons, and admin-provided restoration reasons for audit and record-keeping. |
| 198 | **Profile Restoration: Custom Admin Message Support** | Allow system admins to enter a custom restoration message instead of the default “Profile restored by system administrator.” Determine the storage location (existing or new MongoDB field) for restoration messages to maintain audit consistency. |
| 199 | **Loan Application: Monthly Income and Legal Document Review** | Evaluate replacing annual income with monthly income for loan applicants. Verify standard income data requirements and mandatory documents for Indian loan applications to ensure legal and practical alignment. |
| 233 | **Backend User Model Refactor for Numeric Fields** | Updated `User` model to store `monthlySalary` and `workExperience` as numbers instead of strings. Modified all relevant backend endpoints and validation logic to handle numeric input, including creating/updating users. Ensured backward compatibility with existing string data by adding conversion fallback during data fetch and updates. |
| 234 | **Login Audit Collection & System Admin Dashboard** | Created new `LoginAudit` MongoDB collection to store IP addresses, login timestamp, session duration, and pages visited. Implemented backend endpoints to log login/logout events and user activity. Added frontend dashboard for `system_admin` to view audit records with filters and pagination, while restricting visibility for underwriters. |
| 235 | **Auto-Logout & Remote Session Management** | Implemented auto-logout after 10–20 minutes of inactivity with configurable timer. Added system admin capability to remotely log out any user from any device, either manually or following a password reset. Integrated password reset flow to invalidate all active sessions for the user. Updated frontend and backend session handling to reflect real-time logout and session termination events. |

---

**Document Version:** 214
**Last Updated:** 22nd November 2025
**Maintained By:** Aniruddh Ballal